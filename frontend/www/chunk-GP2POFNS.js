import{a as K}from"./chunk-IP2ACYZE.js";import{A as H,B as W,C as Y,D as G,F as J,c as j,d as M,e as B,j as L,l as A,m as O,p as R,q as D,r as $,v as q,x as z,y as N,z as U}from"./chunk-GBDWTUPF.js";import"./chunk-W6NTPPUU.js";import"./chunk-QUJFQN2Y.js";import"./chunk-LZY3MH7U.js";import"./chunk-OPN4YQTK.js";import"./chunk-A6KUYJMY.js";import"./chunk-GY2RFTWI.js";import"./chunk-JQAPKBGQ.js";import"./chunk-NOPOOCJB.js";import"./chunk-7FY2OE2O.js";import"./chunk-2CHZGF6F.js";import"./chunk-EEMHI3CI.js";import"./chunk-EUVJAPNJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-63ZMALED.js";import"./chunk-CKP3SGE2.js";import"./chunk-KLIW6SEU.js";import{A as g,D as u,E as r,F as o,G as m,M as I,N as _,O as h,W as c,X as y,Y as x,Z as E,e as v,fa as w,g as b,ga as T,ia as F,k as f,l as C,qa as P,r as k,s,sa as V,u as p,w as S}from"./chunk-ENGDSGTH.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as d}from"./chunk-JHI3MBHO.js";var Q=(()=>{let i=class i{constructor(e){this.toastCtrl=e}success(e){return d(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:2e3,color:"success",position:"top",icon:"checkmark-circle"})).present()})}error(e){return d(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:3e3,color:"danger",position:"top",icon:"close-circle"})).present()})}info(e){return d(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:2e3,color:"primary",position:"top"})).present()})}};i.\u0275fac=function(t){return new(t||i)(b(Y))},i.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function it(n,i){if(n&1){let a=I();r(0,"ion-item")(1,"ion-thumbnail",9),m(2,"img",10),o(),r(3,"ion-label")(4,"h2"),c(5),o(),r(6,"p"),c(7),o(),r(8,"p")(9,"strong"),c(10),o()()(),r(11,"ion-button",11),_("click",function(){let t=f(a).$implicit,l=h(2);return C(l.removeItem(t.menuItem._id))}),m(12,"ion-icon",12),o()()}if(n&2){let a=i.$implicit;s(2),u("src",a.menuItem.imageUrl||"assets/placeholder.jpg",k),s(3),y(a.menuItem.title),s(2),E("\u20B9",a.menuItem.price," x ",a.quantity),s(3),x("\u20B9",a.menuItem.price*a.quantity)}}function nt(n,i){if(n&1){let a=I();r(0,"ion-card")(1,"ion-list"),g(2,it,13,5,"ion-item",2),o(),r(3,"ion-card-content")(4,"ion-item",3)(5,"ion-label",4)(6,"h2")(7,"strong"),c(8),o()()()(),r(9,"ion-button",5),_("click",function(){f(a);let t=h();return C(t.checkout())}),m(10,"ion-icon",6),c(11," Checkout "),o(),r(12,"ion-button",7),_("click",function(){f(a);let t=h();return C(t.clearCart())}),m(13,"ion-icon",8),c(14," Clear Cart "),o()()()}if(n&2){let a=h();s(2),u("ngForOf",a.cart.items),s(6),x("Total: \u20B9",a.cart.totalPrice)}}function rt(n,i){n&1&&(r(0,"ion-card")(1,"ion-card-content",13),m(2,"ion-icon",14),r(3,"h2"),c(4,"Your cart is empty"),o(),r(5,"p"),c(6,"Add items from the menu!"),o(),r(7,"ion-button",15),c(8,"Browse Menu"),o()()())}function ot(n,i){n&1&&(r(0,"div",16),m(1,"ion-spinner"),o())}var ht=(()=>{let i=class i{constructor(e,t,l,X){this.api=e,this.cartService=t,this.toast=l,this.alertCtrl=X,this.cart=null,this.loading=!1}ngOnInit(){this.loadCart()}ionViewWillEnter(){this.loadCart()}loadCart(){this.loading=!0,this.api.getCart().subscribe({next:e=>{e.success&&(this.cart=e.data,this.cartService.updateCartCount(this.cart.items.length)),this.loading=!1},error:e=>{console.error("Cart Error:",e),this.toast.error("Failed to load cart"),this.loading=!1}})}removeItem(e){this.api.removeFromCart(e).subscribe({next:t=>{t.success&&(this.cart=t.data,this.cartService.updateCartCount(this.cart.items.length),this.toast.success("Item removed!"))},error:t=>{console.error("Remove Error:",t),this.toast.error("Failed to remove item")}})}clearCart(){return d(this,null,function*(){yield(yield this.alertCtrl.create({header:"Clear Cart",message:"Are you sure you want to clear entire cart?",buttons:[{text:"Cancel",role:"cancel"},{text:"Clear",role:"destructive",handler:()=>{this.api.clearCart().subscribe({next:t=>{t.success&&(this.cart={items:[],totalPrice:0},this.cartService.updateCartCount(0),this.toast.success("Cart cleared!"))},error:t=>{console.error("Clear Error:",t),this.toast.error("Failed to clear cart")}})}}]})).present()})}checkout(){this.toast.info(`Total: \u20B9${this.cart.totalPrice} - Checkout coming soon!`)}};i.\u0275fac=function(t){return new(t||i)(p(J),p(K),p(Q),p(W))},i.\u0275cmp=S({type:i,selectors:[["app-cart"]],decls:8,vars:3,consts:[[4,"ngIf"],["class","ion-text-center ion-padding",4,"ngIf"],[4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-end"],["expand","block","color","success",3,"click"],["name","checkmark-circle","slot","start"],["expand","block","fill","outline","color","danger",3,"click"],["name","close-circle","slot","start"],["slot","start"],[3,"src"],["slot","end","fill","clear","color","danger",3,"click"],["name","trash","slot","icon-only"],[1,"ion-text-center"],["name","cart-outline","size","large","color","medium"],["routerLink","/tabs/menu"],[1,"ion-text-center","ion-padding"]],template:function(t,l){t&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),c(3,"Cart"),o()()(),r(4,"ion-content"),g(5,nt,15,2,"ion-card",0)(6,rt,9,0,"ion-card",0)(7,ot,2,0,"div",1),o()),t&2&&(s(5),u("ngIf",l.cart&&l.cart.items.length>0),s(),u("ngIf",!l.cart||l.cart.items.length===0),s(),u("ngIf",l.loading))},dependencies:[G,j,M,B,L,A,O,R,D,$,q,z,N,U,H,F,w,T,V,P],encapsulation:2});let n=i;return n})();export{ht as CartPage};
