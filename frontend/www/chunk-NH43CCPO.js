import{D as Z,F as $,a as A,b as F,c as U,d as B,e as D,f as N,h as Q,j as R,l as H,m as j,n as q,o as G,p as z,q as J,v as K,w as O,y as X,z as Y}from"./chunk-GBDWTUPF.js";import"./chunk-W6NTPPUU.js";import"./chunk-QUJFQN2Y.js";import"./chunk-LZY3MH7U.js";import"./chunk-OPN4YQTK.js";import"./chunk-A6KUYJMY.js";import"./chunk-GY2RFTWI.js";import"./chunk-JQAPKBGQ.js";import"./chunk-NOPOOCJB.js";import"./chunk-7FY2OE2O.js";import"./chunk-2CHZGF6F.js";import"./chunk-EEMHI3CI.js";import"./chunk-EUVJAPNJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-63ZMALED.js";import"./chunk-CKP3SGE2.js";import"./chunk-KLIW6SEU.js";import{$ as h,A as I,D as c,E as a,F as n,G as f,M as T,N as u,O as m,S as b,Sa as V,T as M,Ta as L,U as P,V as E,W as d,Wa as W,_ as x,aa as C,ga as k,ia as v,k as p,l as _,s as l,u as w,w as S}from"./chunk-ENGDSGTH.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var ee=["fileInput"];function te(r,s){r&1&&f(0,"ion-spinner",5)}function ie(r,s){r&1&&(a(0,"span"),d(1,"Process with AI"),n())}function ne(r,s){if(r&1&&f(0,"ion-img",14),r&2){let o=m(2);c("src",o.parsedItem.imageUrl)}}function re(r,s){r&1&&f(0,"ion-spinner",5)}function oe(r,s){r&1&&(a(0,"span"),d(1,"Generate AI Image"),n())}function ae(r,s){if(r&1){let o=T();a(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),d(3,"Parsed Item"),n()(),a(4,"ion-card-content")(5,"ion-item")(6,"ion-label",6),d(7,"Title"),n(),a(8,"ion-input",7),C("ngModelChange",function(e){p(o);let i=m();return h(i.parsedItem.title,e)||(i.parsedItem.title=e),_(e)}),n()(),a(9,"ion-item")(10,"ion-label",6),d(11,"Description"),n(),a(12,"ion-textarea",7),C("ngModelChange",function(e){p(o);let i=m();return h(i.parsedItem.description,e)||(i.parsedItem.description=e),_(e)}),n()(),a(13,"ion-item")(14,"ion-label",6),d(15,"Price"),n(),a(16,"ion-input",8),C("ngModelChange",function(e){p(o);let i=m();return h(i.parsedItem.price,e)||(i.parsedItem.price=e),_(e)}),n()(),I(17,ne,1,1,"ion-img",9),a(18,"ion-button",2),u("click",function(){p(o);let e=m();return _(e.generateImage())}),I(19,re,1,0,"ion-spinner",3)(20,oe,2,0,"span",4),n(),a(21,"ion-button",10),u("click",function(){p(o);let e=E(25);return _(e.click())}),f(22,"ion-icon",11),d(23," Upload Photo "),n(),a(24,"input",12,0),u("change",function(e){p(o);let i=m();return _(i.onFileSelected(e))}),n(),a(26,"ion-button",13),u("click",function(){p(o);let e=m();return _(e.saveItem())}),d(27,"Save Item"),n()()()}if(r&2){let o=m();l(8),x("ngModel",o.parsedItem.title),l(4),x("ngModel",o.parsedItem.description),l(4),x("ngModel",o.parsedItem.price),l(),c("ngIf",o.parsedItem.imageUrl),l(),c("disabled",o.imageLoading),l(),c("ngIf",o.imageLoading),l(),c("ngIf",!o.imageLoading)}}var ue=(()=>{let s=class s{constructor(t){this.api=t,this.inputText="",this.parsedItem=null,this.loading=!1,this.imageLoading=!1}processAI(){this.inputText.trim()&&(this.loading=!0,this.api.extractMenuDetails(this.inputText).subscribe({next:t=>{t.success&&t.data&&(this.parsedItem=t.data),this.loading=!1},error:t=>{console.error("AI Error:",t),alert("Failed to process. Check backend."),this.loading=!1}}))}generateImage(){this.parsedItem?.title&&(this.imageLoading=!0,this.api.generateAIImage(this.parsedItem.title).subscribe({next:t=>{t.success&&(this.parsedItem.imageUrl=t.imageUrl),this.imageLoading=!1},error:t=>{console.error("Image Error:",t),alert("Failed to generate image."),this.imageLoading=!1}}))}onFileSelected(t){let e=t.target.files[0];if(!e)return;let i=new FileReader;i.onload=g=>{this.parsedItem.imageUrl=g.target.result},i.readAsDataURL(e)}saveItem(){this.parsedItem&&this.api.createMenuItem(this.parsedItem).subscribe({next:t=>{console.log("Saved!",t),alert("Item saved successfully!"),this.inputText="",this.parsedItem=null},error:t=>{console.error("Save Error:",t),alert("Failed to save item.")}})}};s.\u0275fac=function(e){return new(e||s)(w($))},s.\u0275cmp=S({type:s,selectors:[["app-creator"]],viewQuery:function(e,i){if(e&1&&b(ee,5),e&2){let g;M(g=P())&&(i.fileInput=g.first)}},decls:13,vars:5,consts:[["fileInput",""],["placeholder","E.g., Spicy chicken curry with rice for 12","rows","3",3,"ngModelChange","ngModel"],["expand","block",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],["name","crescent"],["position","stacked"],[3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[3,"src",4,"ngIf"],["expand","block",3,"click"],["name","camera","slot","start"],["type","file","accept","image/*","hidden","",3,"change"],["expand","block","color","success",3,"click"],[3,"src"]],template:function(e,i){e&1&&(a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Create Item"),n()()(),a(4,"ion-content")(5,"ion-card")(6,"ion-card-content")(7,"ion-item")(8,"ion-textarea",1),C("ngModelChange",function(y){return h(i.inputText,y)||(i.inputText=y),y}),n()(),a(9,"ion-button",2),u("click",function(){return i.processAI()}),I(10,te,1,0,"ion-spinner",3)(11,ie,2,0,"span",4),n()()(),I(12,ae,28,7,"ion-card",4),n()),e&2&&(l(8),x("ngModel",i.inputText),l(),c("disabled",i.loading),l(),c("ngIf",i.loading),l(),c("ngIf",!i.loading),l(),c("ngIf",i.parsedItem))},dependencies:[Z,U,B,D,N,Q,R,H,j,q,G,z,J,K,O,X,Y,A,F,v,k,W,V,L],encapsulation:2});let r=s;return r})();export{ue as CreatorPage};
