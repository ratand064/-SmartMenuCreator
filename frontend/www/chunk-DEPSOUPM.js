import{a as K}from"./chunk-IP2ACYZE.js";import{D as G,E as q,F as J,c as E,d as A,e as y,f as k,g as P,h as $,i as F,j as V,k as j,l as z,m as R,n as O,s as N,t as U,u as B,v as D,y as H,z as W}from"./chunk-GBDWTUPF.js";import"./chunk-W6NTPPUU.js";import"./chunk-QUJFQN2Y.js";import"./chunk-LZY3MH7U.js";import"./chunk-OPN4YQTK.js";import"./chunk-A6KUYJMY.js";import"./chunk-GY2RFTWI.js";import"./chunk-JQAPKBGQ.js";import"./chunk-NOPOOCJB.js";import"./chunk-7FY2OE2O.js";import"./chunk-2CHZGF6F.js";import"./chunk-EEMHI3CI.js";import"./chunk-EUVJAPNJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-63ZMALED.js";import"./chunk-CKP3SGE2.js";import"./chunk-KLIW6SEU.js";import{A as h,D as d,E as r,F as a,G as m,M as v,N as f,O as u,W as s,X as I,Y as S,ba as b,e as x,fa as M,ga as w,ia as T,k as _,l as g,s as l,u as p,w as C}from"./chunk-ENGDSGTH.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var L=(()=>{let t=class t{constructor(){}shareViaWhatsApp(i){let o=`https://wa.me/?text=${`\u{1F37D}\uFE0F *${i.title}*%0A%0A${i.description}%0A%0A\u{1F4B0} Price: \u20B9${i.price}%0A%0AOrder now: ${q.apiUrl.replace("/api","")}/menu`}`;window.open(o,"_blank")}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Z(n,t){if(n&1){let c=v();r(0,"ion-col",4)(1,"ion-card"),m(2,"ion-img",5),r(3,"ion-card-header")(4,"ion-card-title"),s(5),a(),r(6,"ion-card-subtitle"),s(7),a()(),r(8,"ion-card-content")(9,"p"),s(10),a(),r(11,"ion-button",6),f("click",function(){let e=_(c).$implicit,o=u(2);return g(o.addToCart(e))}),m(12,"ion-icon",7),s(13," Add to Cart "),a(),r(14,"ion-button",8),f("click",function(){let e=_(c).$implicit,o=u(2);return g(o.shareItem(e))}),m(15,"ion-icon",9),s(16," Share "),a()()()()}if(n&2){let c=t.$implicit;l(2),d("alt",b(c.title))("src",c.imageUrl||"assets/placeholder.jpg"),l(3),I(c.title),l(2),S("\u20B9",c.price),l(3),I(c.description)}}function ee(n,t){if(n&1&&(r(0,"ion-grid")(1,"ion-row"),h(2,Z,17,6,"ion-col",3),a()()),n&2){let c=u();l(2),d("ngForOf",c.menuItems)}}function te(n,t){n&1&&(r(0,"ion-card")(1,"ion-card-content",10)(2,"p"),s(3,"No menu items yet. Create one in the Creator tab!"),a()()())}function ie(n,t){n&1&&(r(0,"div",11),m(1,"ion-spinner"),a())}var me=(()=>{let t=class t{constructor(i,e,o){this.api=i,this.cartService=e,this.shareService=o,this.menuItems=[],this.loading=!1}ngOnInit(){this.loadMenu()}loadMenu(i){this.loading=!0,this.api.getAllMenuItems().subscribe({next:e=>{e.success&&(this.menuItems=e.data),this.loading=!1,i&&i.target.complete()},error:e=>{console.error("Menu Error:",e),this.loading=!1,i&&i.target.complete()}})}addToCart(i){this.api.addToCart(i._id).subscribe({next:e=>{e.success&&(this.cartService.updateCartCount(e.data.items.length),alert("Added to cart!"))},error:e=>{console.error("Cart Error:",e),alert("Failed to add to cart.")}})}shareItem(i){this.shareService.shareViaWhatsApp(i)}};t.\u0275fac=function(e){return new(e||t)(p(J),p(K),p(L))},t.\u0275cmp=C({type:t,selectors:[["app-menu"]],decls:10,vars:3,consts:[["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","ion-text-center ion-padding",4,"ngIf"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","4"],[3,"src","alt"],["expand","block",3,"click"],["name","cart","slot","start"],["expand","block","fill","outline",3,"click"],["name","share-social","slot","start"],[1,"ion-text-center"],[1,"ion-text-center","ion-padding"]],template:function(e,o){e&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Menu"),a()()(),r(4,"ion-content")(5,"ion-refresher",0),f("ionRefresh",function(Q){return o.loadMenu(Q)}),m(6,"ion-refresher-content"),a(),h(7,ee,3,1,"ion-grid",1)(8,te,4,0,"ion-card",1)(9,ie,2,0,"div",2),a()),e&2&&(l(7),d("ngIf",o.menuItems.length>0),l(),d("ngIf",o.menuItems.length===0&&!o.loading),l(),d("ngIf",o.loading))},dependencies:[G,E,A,y,k,P,$,F,V,j,z,R,O,N,U,B,D,H,W,T,M,w],encapsulation:2});let n=t;return n})();export{me as MenuPage};
